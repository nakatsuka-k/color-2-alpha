<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>画像背景除去システム</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <header class="text-center py-4 mb-4 bg-primary text-white">
                    <h1><i class="fas fa-magic me-2"></i>画像背景除去システム</h1>
                    <p class="mb-0">AIを使用して画像の背景を自動的に除去し、新しい背景を適用できます</p>
                </header>
            </div>
        </div>
        
        <div class="row">
            <!-- アップロード・設定パネル -->
            <div class="col-md-4">
                <div class="card h-100">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="fas fa-upload me-2"></i>画像アップロード</h5>
                    </div>
                    <div class="card-body">
                        <!-- ファイルアップロード -->
                        <div class="upload-area" id="uploadArea">
                            <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                            <p class="text-muted">ここに画像をドラッグ&ドロップするか、<br>クリックしてファイルを選択してください</p>
                            <input type="file" id="fileInput" accept="image/*" class="d-none">
                        </div>
                        
                        <!-- 進行状況 -->
                        <div id="progressSection" class="mt-3 d-none">
                            <div class="progress">
                                <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated" 
                                     role="progressbar" style="width: 0%"></div>
                            </div>
                            <small id="progressText" class="text-muted">処理中...</small>
                        </div>
                        
                        <!-- 背景色設定 -->
                        <div id="backgroundSettings" class="mt-4 d-none">
                            <hr>
                            <h6><i class="fas fa-palette me-2"></i>背景色設定</h6>
                            <div class="row">
                                <div class="col-8">
                                    <input type="color" id="bgColorPicker" value="#ffffff" class="form-control form-control-color">
                                </div>
                                <div class="col-4">
                                    <button id="applyBgBtn" class="btn btn-success btn-sm w-100">適用</button>
                                </div>
                            </div>
                            <div class="mt-2">
                                <small class="text-muted">プリセット:</small>
                                <div class="color-presets mt-1">
                                    <button class="color-preset" data-color="#ffffff" style="background-color: #ffffff;"></button>
                                    <button class="color-preset" data-color="#000000" style="background-color: #000000;"></button>
                                    <button class="color-preset" data-color="#ff0000" style="background-color: #ff0000;"></button>
                                    <button class="color-preset" data-color="#00ff00" style="background-color: #00ff00;"></button>
                                    <button class="color-preset" data-color="#0000ff" style="background-color: #0000ff;"></button>
                                    <button class="color-preset" data-color="#ffff00" style="background-color: #ffff00;"></button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- ダウンロードボタン -->
                        <div id="downloadSection" class="mt-4 d-none">
                            <hr>
                            <div class="d-grid gap-2">
                                <button id="downloadTransparentBtn" class="btn btn-outline-primary">
                                    <i class="fas fa-download me-2"></i>透明背景をダウンロード
                                </button>
                                <button id="downloadFinalBtn" class="btn btn-primary d-none">
                                    <i class="fas fa-download me-2"></i>背景付きをダウンロード
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- プレビューパネル -->
            <div class="col-md-8">
                <div class="card h-100">
                    <div class="card-header">
                        <h5 class="card-title mb-0"><i class="fas fa-eye me-2"></i>プレビュー</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <!-- オリジナル画像 -->
                            <div class="col-md-6">
                                <div class="preview-container">
                                    <h6 class="text-center mb-3">オリジナル画像</h6>
                                    <div id="originalPreview" class="preview-area">
                                        <div class="preview-placeholder">
                                            <i class="fas fa-image fa-3x text-muted"></i>
                                            <p class="text-muted mt-2">画像がアップロードされると<br>ここに表示されます</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 処理後画像 -->
                            <div class="col-md-6">
                                <div class="preview-container">
                                    <h6 class="text-center mb-3">処理後画像</h6>
                                    <div id="processedPreview" class="preview-area">
                                        <div class="preview-placeholder">
                                            <i class="fas fa-magic fa-3x text-muted"></i>
                                            <p class="text-muted mt-2">処理が完了すると<br>ここに表示されます</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- アラート表示エリア -->
        <div id="alertArea" class="mt-3"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
